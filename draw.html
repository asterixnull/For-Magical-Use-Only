<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desert Draw - For Magical Use Only</title>
    <link href="https://fonts.googleapis.com/css2?family=Unica+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <nav>
        <a href="index.html">Home</a>
        <a href="aboutthemagic.html">About</a>
        <a href="gallery.html">Gallery</a>
        <a href="marketplace.html">Shop</a>
        <a href="tours.html">Tours</a>
        <a href="support.html">Support</a>
        <a href="draw.html">Draw</a>
        <a href="tarot.html">Tarot</a>
        <a href="contact.html">Contact</a>
    </nav>
    <h1>Draw Your Magic</h1>
    <div id="colorPicker">
        <button id="neon-red" class="color-btn" onclick="setColor('#ff00ff')"></button>
        <button id="neon-green" class="color-btn" onclick="setColor('#00ff00')"></button>
        <button id="neon-blue" class="color-btn" onclick="setColor('#00ffff')"></button>
        <button id="neon-yellow" class="color-btn" onclick="setColor('#ffff00')"></button>
        <button id="neon-purple" class="color-btn" onclick="setColor('#ff00ff')"></button>
    </div>
    <canvas id="canvas"></canvas>
<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const bg = new Image();
    bg.src = 'crayonbackground.png'; // Your background
    let drawing = false;
    let currentColor = '#ff0000'; // Default red
    let lastX = 0, lastY = 0; // For smooth lines

    bg.onload = () => {
        ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);
    };

    function setColor(color) {
        currentColor = color;
        // Highlight active button
        document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
    }

    // Mouse events
    canvas.addEventListener('mousedown', (e) => { drawing = true; lastX = e.clientX; lastY = e.clientY; });
    canvas.addEventListener('mouseup', () => drawing = false);
    canvas.addEventListener('mouseout', () => drawing = false);
    canvas.addEventListener('mousemove', draw);

    function draw(e) {
        if (!drawing) return;
        ctx.strokeStyle = currentColor;
        ctx.lineWidth = 3;
        ctx.lineCap = 'round';
        ctx.globalAlpha = 0.8; // Slight transparency for glow

        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(e.clientX, e.clientY);
        ctx.stroke();

        lastX = e.clientX;
        lastY = e.clientY;

        // Shooting star: Fade trail after 3 seconds with sparkle effect
        const trail = ctx.getImageData(e.clientX - 5, e.clientY - 5, 10, 10);
        setTimeout(() => {
            ctx.globalAlpha = 0.5; // Fade
            ctx.putImageData(trail, e.clientX - 5, e.clientY - 5);
            ctx.globalAlpha = 1;
            // Redraw BG to "erase" fully after fade
            setTimeout(() => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);
            }, 1000);
        }, 3000);
    }

    // Touch support for mobile
    canvas.addEventListener('touchstart', (e) => { e.preventDefault(); drawing = true; const touch = e.touches[0]; lastX = touch.clientX; lastY = touch.clientY; });
    canvas.addEventListener('touchend', (e) => { e.preventDefault(); drawing = false; });
    canvas.addEventListener('touchmove', (e) => { e.preventDefault(); const touch = e.touches[0]; draw({clientX: touch.clientX, clientY: touch.clientY}); });

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);
    });
</script>
</body>
</html>
