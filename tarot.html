<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slab City Vortex Tarot</title>
    <link href="https://fonts.googleapis.com/css2?family=Unica+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <nav>
        <a href="index.html">Home</a>
        <a href="aboutthemagic.html">About</a>
        <a href="gallery.html">Gallery</a>
        <a href="marketplace.html">Shop</a>
        <a href="tours.html">Tours</a>
        <a href="support.html">Support</a>
        <a href="draw.html">Draw</a>
        <a href="tarot.html">Tarot</a>
        <a href="contact.html">Contact</a>
    </nav>
    <div id="tarot-container">
        <button id="draw-button">Draw the Vortex</button>
        <div id="card1" class="card hidden">Core Bliss</div>
        <div id="card2" class="card hidden">Relic Foundation</div>
        <div id="card3" class="card hidden">Vision Edge</div>
        <div id="card4" class="card hidden">Spark Ignition</div>
        <div id="card5" class="card hidden">Hidden Passage</div>
        <div id="card6" class="card hidden">Meth Lab Outcome</div>
        <div id="card7" class="card hidden">Zen Release</div>
    </div>

    <script>
        const cards = [
            'Page of Bliss', 'Knight of Bliss', 'Queen of Bliss', 'Ace of Relics', 'Two of Relics', 'Five of Visions', 'Nine of Visions',
            'Ace of Sparks', 'Three of Sparks', 'King of Sparks'
        ]; // Sample—expand with full deck
        const positions = [
            { top: '50%', left: '50%', transform: 'rotate(0deg) scale(1)' },
            { top: '40%', left: '60%', transform: 'rotate(45deg) scale(0.9)' },
            { top: '30%', left: '70%', transform: 'rotate(90deg) scale(0.8)' },
            { top: '40%', left: '40%', transform: 'rotate(135deg) scale(0.9)' },
            { top: '60%', left: '30%', transform: 'rotate(180deg) scale(0.8)' },
            { top: '70%', left: '40%', transform: 'rotate(225deg) scale(0.9)' },
            { top: '60%', left: '60%', transform: 'rotate(270deg) scale(0.8)' }
        ];

        document.getElementById('draw-button').addEventListener('click', () => {
            const drawnCards = [];
            while (drawnCards.length < 7) {
                const card = cards[Math.floor(Math.random() * cards.length)];
                if (!drawnCards.includes(card)) drawnCards.push(card);
            }

            document.querySelectorAll('.card').forEach((card, index) => {
                card.innerText = `${drawnCards[index]} - ${card.id.replace('card', '')}`;
                card.classList.remove('hidden');
                card.style.top = positions[index].top;
                card.style.left = positions[index].left;
                card.style.transform = positions[index].transform;

                // Psychedelic orbit animation
                let angle = 0;
                const orbit = setInterval(() => {
                    angle += 2;
                    card.style.transform = `${positions[index].transform} translate(${Math.sin(angle * Math.PI / 180) * 50}px, ${Math.cos(angle * Math.PI / 180) * 50}px)`;
                    if (angle >= 360) clearInterval(orbit);
                }, 50);
            });
        });

        // Full Moon Distortion (from your idea)
        window.addEventListener('load', () => {
            const now = new Date();
            const day = now.getDate();
            const month = now.getMonth() + 1;
            const isFullMoon = [17].includes(day) && month === 10; // Oct 17, 2025—adjust for real dates
            if (isFullMoon) {
                document.body.style.transform = 'rotate(5deg) scale(1.1)';
                document.body.style.filter = 'hue-rotate(90deg)';
                setInterval(() => document.body.style.filter = `hue-rotate(${Math.random() * 360}deg)`, 2000); // Psychedelic shift
            }

            // Third Tuesday Flip (your new idea)
            const isThirdTuesday = (day >= 15 && day <= 21) && (new Date(now.getFullYear(), month - 1, day).getDay() === 2);
            if (isThirdTuesday) document.body.style.transform = 'rotate(180deg)';
        });
    </script>
</body>
</html>
